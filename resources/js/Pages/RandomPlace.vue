<script setup>
import Map from '@/Components/Map.vue';
import Layout from '@/Layouts/Layout.vue';
import { Head } from '@inertiajs/vue3';
import { Button, Rating } from 'flowbite-vue';
import { toValue } from 'vue';
import { useRandomPlace } from '@/Composables/places.js';
import { router } from '@inertiajs/vue3';

const place = useRandomPlace();
const vkId = 12;

function accept() {
    router.post('/navigator', {
        response: toValue(place),
        userVkId: vkId,
        is_confirmed: false,
    });
}

function reload() {
    router.get('/skip');
    router.visit('/random');
}
</script>

<template>
    <Layout>
        <Head title="Random Place" />

        <Rating class="mx-auto my-2" :rating="3" />

        <section class="flex flex-col gap-2" v-if="place">
            <h1 class="my-2 text-2xl font-semibold text-gray-700 text-center">{{ place.name }}</h1>
            <p class="text-sm text-gray-500 italic text-center my-2">{{ place.address }}</p>
        </section>

        <Map :coordinates="place.pin" v-if="place" />

        <div class="flex gap-6 justify-around mt-6">
            <Button color="dark" outline @click="reload">Пропустить</Button>
            <Button color="green" outline @click="accept">Я в деле!</Button>
        </div>
    </Layout>
</template>
